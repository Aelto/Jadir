"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const path = require("path");
const express = require("express");
const ws_1 = require("./ws/ws");
const db_init_1 = require("./db-init");
const webRoot = path.join(__dirname, `../../app/`);
const connection = db_init_1.default();
const app = express();
const expressWs = require('express-ws')(app);
const ws = ws_1.default(app, connection);
app.use('/app', express.static(webRoot));
app.use('/assets', express.static(path.join(webRoot, '/assets')));
app.get('/', (req, res) => res.sendFile(path.join(webRoot, `index.html`)));
ws.accept(app, '/ws');
app.get('*', (req, res) => res.sendFile(path.join(webRoot, `index.html`)));
const port = 3000;
app.listen(port);
console.log(`server started on port ${port}`);
